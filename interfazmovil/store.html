<!doctype html>
<html lang="en">
<head>
   <link rel="icon" type="image/jpeg" href="logo.jpeg">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Digital Gift Cards Store - Catalog</title>
  <style>
    :root{
      --bg-gradient-1: #6dd5ed;
      --bg-gradient-2: #2193b0;
      --accent: #ff7a59;
      --card-bg: rgba(255,255,255,0.95);
      --muted: #6b7280;
      --glass: rgba(255,255,255,0.06);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%; background: linear-gradient(135deg,var(--bg-gradient-1),var(--bg-gradient-2));}

    .screen{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;overflow:hidden;}

    .store-card{
      width:100%;max-width:500px;border-radius:18px;
      background:var(--card-bg);box-shadow:0 10px 30px rgba(16,24,40,0.25);
      padding:20px;display:flex;flex-direction:column;gap:18px;
      backdrop-filter: blur(6px);max-height:90vh;overflow-y:auto;
      position: relative;
    }

    h1{text-align:center;color:#0f172a;font-size:22px}
    p.lead{text-align:center;color:var(--muted);font-size:14px}

    .cards-container{display:grid;grid-template-columns:1fr 1fr;gap:12px}

    .gift-card{
      background:var(--glass);border-radius:12px;padding:10px;
      display:flex;flex-direction:column;align-items:center;text-align:center;
      transition:transform 0.25s, box-shadow 0.25s;cursor:pointer;
    }
    .gift-card:hover{transform:scale(1.05);box-shadow:0 8px 20px rgba(0,0,0,0.15);}
    .gift-card img{width:80px;height:80px;object-fit:contain;margin-bottom:8px;}
    .gift-card h3{font-size:16px;color:#0f172a;margin-bottom:6px;}
    .gift-card p{font-size:13px;color:var(--muted);margin-bottom:8px;}
    .gift-card button{
      padding:8px 12px;border:none;border-radius:8px;
      background:linear-gradient(90deg,var(--accent),#ff9966);
      color:white;font-weight:600;cursor:pointer;transition:all 0.25s;
    }
    .gift-card button:hover{transform:scale(1.1);}

    /* Cart Icon */
    .cart-icon{
      position:absolute;top:15px;right:15px;
      background:var(--accent);color:white;
      border-radius:50%;width:40px;height:40px;
      display:flex;align-items:center;justify-content:center;
      font-weight:bold;cursor:pointer;
      transition:transform 0.3s;
    }
    .cart-icon:hover{transform:scale(1.1);}
    .cart-count{
      position:absolute;top:5px;right:5px;
      background:white;color:var(--accent);
      font-size:12px;font-weight:bold;
      border-radius:50%;width:18px;height:18px;
      display:flex;align-items:center;justify-content:center;
    }

    /* Modal */
    .modal{
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.6);display:none;align-items:center;justify-content:center;
      z-index:999;
    }
    .modal-content{
      background:white;border-radius:16px;padding:20px;
      width:90%;max-width:400px;max-height:80vh;overflow-y:auto;
    }
    .modal-content h2{text-align:center;margin-bottom:10px;}
    .cart-item{display:flex;justify-content:space-between;margin:6px 0;color:#333}
    .modal-content button{margin-top:10px;width:100%;padding:10px;border:none;border-radius:10px;font-weight:bold;cursor:pointer;}
    .checkout{background:linear-gradient(90deg,var(--accent),#ff9966);color:white;}
    .cancel{background:#ccc;color:#333;}

    /* Payment screen */
    .processing{display:none;flex-direction:column;align-items:center;justify-content:center;gap:20px;height:100vh;color:white;}
    .loader{border:6px solid rgba(255,255,255,0.3);border-top:6px solid white;border-radius:50%;width:50px;height:50px;animation:spin 1s linear infinite;}
    @keyframes spin{100%{transform:rotate(360deg)}}

    /* Imagen esquina inferior derecha */
    .imagen-esquina {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 100px;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      z-index: 1000;
    }

    @media(max-width:380px){.cards-container{grid-template-columns:1fr;}}
  </style>
</head>
<body>
  <main class="screen" id="catalog-screen">
    <section class="store-card">
      <div class="cart-icon" onclick="openCart()">
        üõí
        <div class="cart-count" id="cart-count">0</div>
      </div>
      <h1>Digital Gift Cards</h1>
      <p class="lead">Browse and purchase your favorite gift cards from games, video, and music platforms!</p>

      <div class="cards-container" id="cards-container">
        <!-- Example Cards -->
        <div class="gift-card">
          <img src="imagenes/steam.jpg" alt="Steam Gift Card">
          <h3>Steam</h3>
          <p>$20 - $200</p>
          <button onclick="selectAmount('Steam',[20,50,100,200])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/xbox.jpg" alt="Xbox Gift Card">
          <h3>Xbox</h3>
          <p>$10 - $150</p>
          <button onclick="selectAmount('Xbox',[10,25,50,100,150])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/netflix.jpg" alt="Netflix Gift Card">
          <h3>Netflix</h3>
          <p>$15 - $100</p>
          <button onclick="selectAmount('Netflix',[15,25,50,100])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/spotify.jpeg" alt="Spotify Gift Card">
          <h3>Spotify</h3>
          <p>$10 - $100</p>
          <button onclick="selectAmount('Spotify',[10,25,50,100])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/play.jpg" alt="PlayStation Gift Card">
          <h3>PlayStation</h3>
          <p>$10 - $100</p>
          <button onclick="selectAmount('PlayStation',[10,25,50,100])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/disney.jpeg" alt="Disney Gift Card">
          <h3>Disney</h3>
          <p>$10 - $100</p>
          <button onclick="selectAmount('Disney',[10,25,50,100])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/hbo.jpg" alt="HBO MAX Gift Card">
          <h3>HBO MAX</h3>
          <p>$10 - $100</p>
          <button onclick="selectAmount('HBO MAX',[10,25,50,100])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/google.jpeg" alt="Google Play Gift Card">
          <h3>Google Play</h3>
          <p>$10 - $100</p>
          <button onclick="selectAmount('Google Play',[10,25,50,100])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/nintendo.jpg" alt="Nintendo Gift Card">
          <h3>Nintendo</h3>
          <p>$10 - $100</p>
          <button onclick="selectAmount('Nintendo',[10,25,50,100])">Buy</button>
        </div>
        <div class="gift-card">
          <img src="imagenes/itunes.jpeg" alt="Itunes Gift Card">
          <h3>Itunes</h3>
          <p>$10 - $100</p>
          <button onclick="selectAmount('Itunes',[10,25,50,100])">Buy</button>
        </div>
      </div>

      <div class="back-btn">
        <button onclick="window.location.href='Interfaz Inicio - m√≥vil.html'">‚Üê Back to Home</button>
      </div>
    </section>
  </main>
HEAD
  <!-- Payment screen -->
  <div class="processing" id="processing-screen">
    <div class="loader"></div>
    <h2>Processing payment...</h2>
  </div>

  <!-- Modal Cart -->
  <div class="modal" id="cart-modal">
    <div class="modal-content">
      <h2>Your Cart</h2>
      <div id="cart-items"></div>
      <button class="checkout" onclick="checkout()">Checkout</button>
      <button class="cancel" onclick="closeCart()">Cancel</button>
    </div>
  </div>

  <script>
  // Carrito
  let cart = [];

  const enviarDatos = async () => {
    const dato = "este es un dato"
    console.log('desde enviarDatos');
    const envioDato = await fetch('http://localhost:3000/ejecutar-script',{
      method:"POST",
      headers:{
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({variable:dato})
    })
  }

  console.log('holaaaaaaaaa');

  enviarDatos();

  // Cuentas fijas
  const receiverUrl = "https://ilp.interledger-test.dev/peperecibe";       // Receptor final
  const intermediaryUrl = "https://ilp.interledger-test.dev/c884c441";    // Intermediario

  function selectAmount(name, amounts){
    let choice = prompt(`Select amount for ${name}: ${amounts.join(', ')}`);
    if(choice && amounts.includes(parseInt(choice))){
      cart.push({name, amount: parseInt(choice)});
      updateCart();
      alert(`${name} card of $${choice} added to cart`);
    }else if(choice){
      alert("Invalid amount selected!");
    }
    fetch('ejecutar-script', {method: 'POST', body: name})
    .then(data=>
    {
      alert(data); 
    })
    .catch(error =>{
      console.error('Error', error);
    })

  }

  function updateCart(){
    document.getElementById('cart-count').textContent = cart.length;
  }

  function openCart(){
    const cartItems = document.getElementById('cart-items');
    cartItems.innerHTML = "";
    if(cart.length===0){
      cartItems.innerHTML = "<p>No items in cart</p>";
    }else{
      cart.forEach(item=>{
        const div=document.createElement('div');
        div.classList.add('cart-item');
        div.textContent=`${item.name} - $${item.amount}`;
        cartItems.appendChild(div);
      });
    }
    document.getElementById('cart-modal').style.display='flex';
  }

  function closeCart(){
    document.getElementById('cart-modal').style.display='none';
  }

  async function checkout(){
    if(cart.length===0){alert("Your cart is empty!"); return;}

<<<<<<< Updated upstream
  // Calcular total de la compra
  let total = cart.reduce((sum, item)=> sum + item.amount, 0);

  // Mostrar pantalla de procesamiento
  document.getElementById('catalog-screen').style.display = 'none';
  document.getElementById('processing-screen').style.display = 'flex';

  // Simular un peque√±o retraso de pago (2s)
  setTimeout(() => {
    alert("‚úÖ Purchase completed successfully! Total: $" + total);

    // Vaciar carrito autom√°ticamente despu√©s de la compra
    cart = [];
    updateCart();

    // Regresar a la pantalla principal
    document.getElementById('processing-screen').style.display = 'none';
    document.getElementById('catalog-screen').style.display = 'flex';
    closeCart();
  }, 2000);
}
</script>
=======
    // Pedir URL del comprador (emisor)
    let buyerUrl = prompt("Please enter your Digital Wallet URL to pay:");
    if(!buyerUrl || buyerUrl.trim() === ""){
      alert("Payment canceled. Buyer URL is required.");
      return;
    }

    // Calcular total de la compra
    let total = cart.reduce((sum, item)=> sum + item.amount, 0);

    // Confirmaci√≥n de pago
    let confirmPay = confirm(`You are about to pay $${total} via your wallet.\nDo you accept?`);
    if(!confirmPay){
      alert("Payment canceled by buyer.");
      return;
    }

    // Mostrar pantalla de procesamiento
    document.getElementById('catalog-screen').style.display = 'none';
    document.getElementById('processing-screen').style.display = 'flex';

    try {
      // 1Ô∏è‚É£ Enviar al intermediario
      await fetch(intermediaryUrl, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({from: buyerUrl, to: receiverUrl, amount})
      });

      // 2Ô∏è‚É£ Enviar al receptor
      await fetch(receiverUrl, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({from: intermediaryUrl, amount})
      });

      alert("‚úÖ Payment completed successfully!");

      // Vaciar carrito
      cart = [];
      updateCart();
    } catch(err){
      alert("‚ùå Payment failed: " + err);
    } finally {
      // Ocultar pantalla de procesamiento
      document.getElementById('processing-screen').style.display = 'none';
      document.getElementById('catalog-screen').style.display = 'flex';
      closeCart();
    }
  }
</script>
>>>>>>> Stashed changes
